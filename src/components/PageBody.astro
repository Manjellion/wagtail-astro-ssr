---
const { blocks = [] } = Astro.props;
const safeBlocks = Array.isArray(blocks) ? blocks : [];
---

{safeBlocks.map((block) => {
  if (!block) return null;

  const { type, value } = block;

  if (type === "rich_text") {
    return <div class="richtext" set:html={String(value ?? "")} />;
  }

  if (type === "heading") {
    return <h2>{String(value ?? "")}</h2>;
  }

  if (type === "paragraph") {
    return <p>{String(value ?? "")}</p>;
  }

  // fallback
  return (
    <pre style="white-space:pre-wrap;">
      {JSON.stringify(block, null, 2)}
    </pre>
  );
})}